# AI-–±—É—Ö–≥–∞–ª—Ç–µ—Ä –∏ AI-—é—Ä–∏—Å—Ç –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã Kaspi

## üìã –û–±–∑–æ—Ä

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–≤—É—Ö —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤ –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã Kaspi Demper:
- **AI-–±—É—Ö–≥–∞–ª—Ç–µ—Ä** - —Ä–µ—à–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤ —Å –Ω–∞–ª–æ–≥–∞–º–∏ –∏ —Ä–∞—Å—á–µ—Ç–∞–º–∏ –≤ –†–µ—Å–ø—É–±–ª–∏–∫–µ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω
- **AI-—é—Ä–∏—Å—Ç** - –ø–æ–º–æ—â—å –≤ —Ä–µ—à–µ–Ω–∏–∏ —Å–ø–æ—Ä–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π –∏ –∑–∞—â–∏—Ç–∞ –ø—Ä–∞–≤ –ø—Ä–æ–¥–∞–≤—Ü–æ–≤

---

## üéØ –¶–µ–ª–∏ –∏ –∑–∞–¥–∞—á–∏

### AI-–±—É—Ö–≥–∞–ª—Ç–µ—Ä
- –†–∞—Å—á–µ—Ç –Ω–∞–ª–æ–≥–æ–≤ –¥–ª—è –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ Kaspi
- –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –Ω–∞–ª–æ–≥–æ–æ–±–ª–æ–∂–µ–Ω–∏—é –≤ –†–ö
- –ü–æ–º–æ—â—å —Å –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å—é
- –°–ø–µ—Ü–∏—Ñ–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–º Kaspi.kz

### AI-—é—Ä–∏—Å—Ç
- –†–µ—à–µ–Ω–∏–µ —Å–ø–æ—Ä–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π —Å –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º–∏
- –ó–∞—â–∏—Ç–∞ –ø—Ä–∞–≤ –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ –Ω–∞ Kaspi
- –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É –†–ö
- –ü–æ–º–æ—â—å —Å –¥–æ–≥–æ–≤–æ—Ä–∞–º–∏ –∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### AI-–º–æ–¥–µ–ª–∏

#### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:

**1. OpenAI GPT-4 Turbo** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **–ú–æ–¥–µ–ª—å**: `gpt-4-turbo-preview` –∏–ª–∏ `gpt-4o`
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
  - –£–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø—Ä–æ–µ–∫—Ç–µ (AI-–ø—Ä–æ–¥–∞–∂–Ω–∏–∫)
  - –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ RAG (Retrieval-Augmented Generation)
  - –•–æ—Ä–æ—à–∞—è —Ä–∞–±–æ—Ç–∞ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
- **–°—Ç–æ–∏–º–æ—Å—Ç—å**: ~$0.01-0.03 –∑–∞ 1K —Ç–æ–∫–µ–Ω–æ–≤
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –û—Å–Ω–æ–≤–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –æ–±–æ–∏—Ö –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤

**2. Anthropic Claude 3.5 Sonnet** (—Ä–µ–∑–µ—Ä–≤)
- **–ú–æ–¥–µ–ª—å**: `claude-3-5-sonnet-20241022`
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
  - –î–ª–∏–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç (200K —Ç–æ–∫–µ–Ω–æ–≤)
  - –û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –¥–ª–∏–Ω–Ω—ã–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
  - –•–æ—Ä–æ—à–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤
- **–°—Ç–æ–∏–º–æ—Å—Ç—å**: ~$0.003-0.015 –∑–∞ 1K —Ç–æ–∫–µ–Ω–æ–≤
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –∞–Ω–∞–ª–∏–∑–∞ –¥–æ–≥–æ–≤–æ—Ä–æ–≤

**3. –õ–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **Ollama + Llama 3.1 70B**
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å, –Ω–µ—Ç –ø–ª–∞—Ç—ã –∑–∞ —Ç–æ–∫–µ–Ω—ã
- **–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**: –¢—Ä–µ–±—É–µ—Ç GPU, –Ω–∏–∂–µ –∫–∞—á–µ—Å—Ç–≤–æ
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

#### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
- **–û—Å–Ω–æ–≤–Ω–æ–π**: OpenAI GPT-4 Turbo
- **–†–µ–∑–µ—Ä–≤**: Claude 3.5 Sonnet –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤

---

### –í–µ–∫—Ç–æ—Ä–Ω—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (RAG)

**Supabase Vector (pgvector)** - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
  - –£–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø—Ä–æ–µ–∫—Ç–µ
  - –ù–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ë–î
  - –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ –¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω –¥–ª—è –Ω–∞—á–∞–ª–∞
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –•—Ä–∞–Ω–µ–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –∑–∞–∫–æ–Ω–æ–≤ –∏ –Ω–æ—Ä–º–∞—Ç–∏–≤–æ–≤

**Pinecone** (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: –ü—Ä–æ—Å—Ç–æ—Ç–∞, –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫
- **–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å, –ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –±–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –ë–î

**ChromaDB** (–ª–æ–∫–∞–ª—å–Ω–æ)
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: –ë–µ—Å–ø–ª–∞—Ç–Ω–æ, –ª–æ–∫–∞–ª—å–Ω–æ
- **–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**: –¢—Ä–µ–±—É–µ—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

---

### Python –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

```python
# –î–ª—è —Ä–∞–±–æ—Ç—ã —Å AI
openai>=1.0.0              # OpenAI API
anthropic>=0.18.0          # Claude API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

# –î–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –∏ RAG
langchain>=0.1.0           # RAG –∏ —Ü–µ–ø–æ—á–∫–∏
langchain-openai          # OpenAI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
langchain-community       # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

# –î–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
pypdf2                     # –ü–∞—Ä—Å–∏–Ω–≥ PDF
beautifulsoup4             # –ü–∞—Ä—Å–∏–Ω–≥ HTML
python-docx               # –ü–∞—Ä—Å–∏–Ω–≥ Word –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

# –î–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
pandas                     # –£–∂–µ –µ—Å—Ç—å –≤ –ø—Ä–æ–µ–∫—Ç–µ
numpy                      # –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
```

---

## üìö –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### –î–ª—è AI-–±—É—Ö–≥–∞–ª—Ç–µ—Ä–∞

#### 1. –ù–∞–ª–æ–≥–æ–≤—ã–π –∫–æ–¥–µ–∫—Å –†–ö
- **–ò—Å—Ç–æ—á–Ω–∏–∫**: https://adilet.zan.kz/rus/docs/K1000001_
- **–§–æ—Ä–º–∞—Ç**: PDF/HTML
- **–ú–µ—Ç–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è**: –ü–∞—Ä—Å–∏–Ω–≥ —Å —Å–∞–π—Ç–∞ Adilet
- **–ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í—ã—Å–æ–∫–∏–π

#### 2. –ù–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –∞–∫—Ç—ã –ú–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤ –†–ö
- **–ò—Å—Ç–æ—á–Ω–∏–∫**: https://www.gov.kz/memleket/entities/mf
- **–§–æ—Ä–º–∞—Ç**: HTML/PDF
- **–ú–µ—Ç–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è**: –ü–∞—Ä—Å–∏–Ω–≥ –Ω–æ–≤–æ—Å—Ç–µ–π –∏ —Ä–∞–∑—ä—è—Å–Ω–µ–Ω–∏–π
- **–ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –ï–∂–µ–¥–Ω–µ–≤–Ω–æ
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í—ã—Å–æ–∫–∏–π

#### 3. –†–∞–∑—ä—è—Å–Ω–µ–Ω–∏—è –ù–∞–ª–æ–≥–æ–≤–æ–≥–æ –∫–æ–º–∏—Ç–µ—Ç–∞ –ú–§ –†–ö
- **–ò—Å—Ç–æ—á–Ω–∏–∫**: –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–∞–∑—ä—è—Å–Ω–µ–Ω–∏—è –ù–ö –ú–§ –†–ö
- **–§–æ—Ä–º–∞—Ç**: –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ FAQ
- **–ú–µ—Ç–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è**: –ü–∞—Ä—Å–∏–Ω–≥ —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞
- **–ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –ü—Ä–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –Ω–æ–≤—ã—Ö —Ä–∞–∑—ä—è—Å–Ω–µ–Ω–∏–π
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –°—Ä–µ–¥–Ω–∏–π

#### 4. –°–ø–µ—Ü–∏—Ñ–∏–∫–∞ –¥–ª—è Kaspi
- **–ü—Ä–∞–≤–∏–ª–∞ –Ω–∞–ª–æ–≥–æ–æ–±–ª–æ–∂–µ–Ω–∏—è —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –∫–æ–º–º–µ—Ä—Ü–∏–∏**
  - –ù–î–° –¥–ª—è –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤
  - –ù–∞–ª–æ–≥–∏ —Å –ø—Ä–æ–¥–∞–∂ —á–µ—Ä–µ–∑ Kaspi
  - –û—Ç—á–µ—Ç–Ω–æ—Å—Ç—å –¥–ª—è –ò–ü –∏ –¢–û–û
- **–ò—Å—Ç–æ—á–Ω–∏–∫**: –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã Kaspi + –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ –†–ö
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π

---

### –î–ª—è AI-—é—Ä–∏—Å—Ç–∞

#### 1. –ì—Ä–∞–∂–¥–∞–Ω—Å–∫–∏–π –∫–æ–¥–µ–∫—Å –†–ö
- **–ò—Å—Ç–æ—á–Ω–∏–∫**: https://adilet.zan.kz/rus/docs/K990000001_
- **–§–æ—Ä–º–∞—Ç**: PDF/HTML
- **–ú–µ—Ç–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è**: –ü–∞—Ä—Å–∏–Ω–≥ —Å —Å–∞–π—Ç–∞ Adilet
- **–ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í—ã—Å–æ–∫–∏–π

#### 2. –ó–∞–∫–æ–Ω "–û –∑–∞—â–∏—Ç–µ –ø—Ä–∞–≤ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π"
- **–ò—Å—Ç–æ—á–Ω–∏–∫**: https://adilet.zan.kz/rus/docs/Z990000189_
- **–§–æ—Ä–º–∞—Ç**: PDF/HTML
- **–ú–µ—Ç–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è**: –ü–∞—Ä—Å–∏–Ω–≥ —Å —Å–∞–π—Ç–∞ Adilet
- **–ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í—ã—Å–æ–∫–∏–π

#### 3. –ó–∞–∫–æ–Ω "–û —Ç–æ—Ä–≥–æ–≤–ª–µ"
- **–ò—Å—Ç–æ—á–Ω–∏–∫**: https://adilet.zan.kz/rus/docs/Z990000189_
- **–§–æ—Ä–º–∞—Ç**: PDF/HTML
- **–ú–µ—Ç–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è**: –ü–∞—Ä—Å–∏–Ω–≥ —Å —Å–∞–π—Ç–∞ Adilet
- **–ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í—ã—Å–æ–∫–∏–π

#### 4. –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã –Ω–∞ Kaspi.kz
- **–ò—Å—Ç–æ—á–Ω–∏–∫**: –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã Kaspi
- **–§–æ—Ä–º–∞—Ç**: HTML/PDF
- **–ú–µ—Ç–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è**: –ü–∞—Ä—Å–∏–Ω–≥ —Å —Å–∞–π—Ç–∞ Kaspi
- **–ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö –ø—Ä–∞–≤–∏–ª
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π

#### 5. –¢–∏–ø–∏—á–Ω—ã–µ —Å–ø–æ—Ä–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏
- **–í–æ–∑–≤—Ä–∞—Ç—ã –∏ –æ–±–º–µ–Ω—ã**
- **–°–ø–æ—Ä—ã —Å –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º–∏**
- **–ù–∞—Ä—É—à–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞**
- **–ó–∞—â–∏—Ç–∞ –ø—Ä–∞–≤ –ø—Ä–æ–¥–∞–≤—Ü–∞**
- **–ò—Å—Ç–æ—á–Ω–∏–∫**: –ê–Ω–∞–ª–∏–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –∫–µ–π—Å–æ–≤ + FAQ Kaspi
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í—ã—Å–æ–∫–∏–π

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π

```
unified-backend/
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ ai_accountant.py          # AI-–±—É—Ö–≥–∞–ª—Ç–µ—Ä (–æ—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å)
‚îÇ   ‚îú‚îÄ‚îÄ ai_lawyer.py              # AI-—é—Ä–∏—Å—Ç (–æ—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å)
‚îÇ   ‚îú‚îÄ‚îÄ knowledge_base.py         # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–∞–º–∏ –∑–Ω–∞–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ document_parser.py        # –ü–∞—Ä—Å–∏–Ω–≥ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ knowledge_bases/
‚îÇ   ‚îú‚îÄ‚îÄ accountant/               # –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tax_code.json         # –ù–∞–ª–æ–≥–æ–≤—ã–π –∫–æ–¥–µ–∫—Å (—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kaspi_tax_rules.json  # –ü—Ä–∞–≤–∏–ª–∞ –Ω–∞–ª–æ–≥–æ–æ–±–ª–æ–∂–µ–Ω–∏—è Kaspi
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tax_faq.json          # FAQ –ø–æ –Ω–∞–ª–æ–≥–∞–º
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tax_calculations.json # –ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å—á–µ—Ç–æ–≤
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ lawyer/                   # –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π —é—Ä–∏—Å—Ç–∞
‚îÇ       ‚îú‚îÄ‚îÄ civil_code.json       # –ì—Ä–∞–∂–¥–∞–Ω—Å–∫–∏–π –∫–æ–¥–µ–∫—Å
‚îÇ       ‚îú‚îÄ‚îÄ consumer_rights.json  # –ó–∞–∫–æ–Ω –æ –∑–∞—â–∏—Ç–µ –ø—Ä–∞–≤ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π
‚îÇ       ‚îú‚îÄ‚îÄ kaspi_rules.json      # –ü—Ä–∞–≤–∏–ª–∞ Kaspi
‚îÇ       ‚îú‚îÄ‚îÄ dispute_cases.json    # –ü—Ä–∏–º–µ—Ä—ã —Å–ø–æ—Ä–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π
‚îÇ       ‚îî‚îÄ‚îÄ legal_faq.json       # FAQ –ø–æ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–º –≤–æ–ø—Ä–æ—Å–∞–º
‚îÇ
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îú‚îÄ‚îÄ ai_accountant.py          # API endpoints –¥–ª—è –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ ai_lawyer.py              # API endpoints –¥–ª—è —é—Ä–∏—Å—Ç–∞
‚îÇ
‚îî‚îÄ‚îÄ scripts/
    ‚îú‚îÄ‚îÄ parse_tax_code.py         # –ü–∞—Ä—Å–∏–Ω–≥ –ù–∞–ª–æ–≥–æ–≤–æ–≥–æ –∫–æ–¥–µ–∫—Å–∞
    ‚îú‚îÄ‚îÄ parse_kaspi_rules.py      # –ü–∞—Ä—Å–∏–Ω–≥ –ø—Ä–∞–≤–∏–ª Kaspi
    ‚îî‚îÄ‚îÄ update_knowledge_base.py  # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
```

---

### –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí API Endpoint ‚Üí AI Service ‚Üí Knowledge Base ‚Üí LLM ‚Üí –û—Ç–≤–µ—Ç
                ‚Üì                ‚Üì              ‚Üì
            –í–∞–ª–∏–¥–∞—Ü–∏—è      –ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö  –ì–µ–Ω–µ—Ä–∞—Ü–∏—è
                          –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (RAG)    –æ—Ç–≤–µ—Ç–∞
```

---

## üíª –ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### AI-–±—É—Ö–≥–∞–ª—Ç–µ—Ä

```python
# unified-backend/services/ai_accountant.py

"""
@file: ai_accountant.py
@description: AI-–±—É—Ö–≥–∞–ª—Ç–µ—Ä –¥–ª—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π –ø–æ –Ω–∞–ª–æ–≥–∞–º –≤ –†–ö
@dependencies: openai, langchain, supabase
@created: 2025-12-09
"""

import asyncio
import logging
from typing import Dict, List, Optional, Any
from datetime import datetime

import openai
from langchain.embeddings import OpenAIEmbeddings
from langchain.vectorstores import SupabaseVectorStore
from supabase import create_client

from config import settings
from core.logger import get_logger

logger = get_logger(__name__)


class AIAccountant:
    """AI-–±—É—Ö–≥–∞–ª—Ç–µ—Ä –¥–ª—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π –ø–æ –Ω–∞–ª–æ–≥–∞–º –≤ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–µ"""
    
    def __init__(self):
        self.client = openai.OpenAI(api_key=settings.OPENAI_API_KEY)
        self.embeddings = OpenAIEmbeddings(openai_api_key=settings.OPENAI_API_KEY)
        self.supabase = create_client(settings.SUPABASE_URL, settings.SUPABASE_KEY)
        
    async def answer_tax_question(
        self, 
        question: str, 
        user_context: Optional[Dict[str, Any]] = None
    ) -> Dict[str, Any]:
        """
        –û—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å –ø–æ –Ω–∞–ª–æ–≥–∞–º —Å —É—á–µ—Ç–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ Kaspi
        
        Args:
            question: –í–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            user_context: –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç–∏–ø –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –¥–æ—Ö–æ–¥—ã, —Ä–µ–∂–∏–º –Ω–∞–ª–æ–≥–æ–æ–±–ª–æ–∂–µ–Ω–∏—è)
            
        Returns:
            dict: –û—Ç–≤–µ—Ç —Å –∞–Ω–∞–ª–∏–∑–æ–º, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏ –∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
        """
        try:
            # –ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
            relevant_docs = await self._search_knowledge_base(question)
            
            # –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞
            prompt = self._build_prompt(question, user_context, relevant_docs)
            
            # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ —á–µ—Ä–µ–∑ OpenAI
            response = await self._generate_response(prompt)
            
            return {
                "answer": response["content"],
                "sources": relevant_docs[:3],  # –¢–æ–ø-3 –∏—Å—Ç–æ—á–Ω–∏–∫–∞
                "confidence": self._calculate_confidence(relevant_docs),
                "timestamp": datetime.now().isoformat()
            }
            
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –≤ answer_tax_question: {e}", exc_info=True)
            raise
    
    async def calculate_tax(
        self, 
        revenue: float, 
        expenses: float,
        tax_regime: str,
        business_type: str = "–ò–ü"
    ) -> Dict[str, Any]:
        """
        –†–∞—Å—á–µ—Ç –Ω–∞–ª–æ–≥–æ–≤ –¥–ª—è –ø—Ä–æ–¥–∞–≤—Ü–∞ Kaspi
        
        Args:
            revenue: –î–æ—Ö–æ–¥—ã
            expenses: –†–∞—Å—Ö–æ–¥—ã
            tax_regime: –†–µ–∂–∏–º –Ω–∞–ª–æ–≥–æ–æ–±–ª–æ–∂–µ–Ω–∏—è (–£–°–ù, –û–°–ù–û, –ü–ù–°)
            business_type: –¢–∏–ø –±–∏–∑–Ω–µ—Å–∞ (–ò–ü, –¢–û–û)
            
        Returns:
            dict: –†–∞—Å—á–µ—Ç –Ω–∞–ª–æ–≥–æ–≤ —Å –ø–æ—è—Å–Ω–µ–Ω–∏—è–º–∏
        """
        try:
            # –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –¥–ª—è —Ä–µ–∂–∏–º–∞ –Ω–∞–ª–æ–≥–æ–æ–±–ª–æ–∂–µ–Ω–∏—è
            tax_rules = await self._get_tax_rules(tax_regime, business_type)
            
            # –†–∞—Å—á–µ—Ç –Ω–∞–ª–æ–≥–æ–≤
            calculation = self._perform_calculation(
                revenue, expenses, tax_regime, tax_rules
            )
            
            # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—è—Å–Ω–µ–Ω–∏–π —á–µ—Ä–µ–∑ AI
            explanation = await self._explain_calculation(calculation, tax_rules)
            
            return {
                "calculation": calculation,
                "explanation": explanation,
                "tax_regime": tax_regime,
                "business_type": business_type
            }
            
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –≤ calculate_tax: {e}", exc_info=True)
            raise
    
    async def _search_knowledge_base(self, query: str, top_k: int = 5) -> List[Dict]:
        """–ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π"""
        try:
            # –°–æ–∑–¥–∞–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∞ –∑–∞–ø—Ä–æ—Å–∞
            query_embedding = await self.embeddings.aembed_query(query)
            
            # –ü–æ–∏—Å–∫ –≤ Supabase Vector
            results = self.supabase.rpc(
                "match_documents",
                {
                    "query_embedding": query_embedding,
                    "match_threshold": 0.7,
                    "match_count": top_k,
                    "filter": {"category": "accountant"}
                }
            ).execute()
            
            return [
                {
                    "text": doc["text"],
                    "source": doc["metadata"].get("source", "unknown"),
                    "relevance": doc.get("similarity", 0)
                }
                for doc in results.data
            ]
            
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π: {e}")
            return []
    
    def _build_prompt(
        self, 
        question: str, 
        user_context: Optional[Dict],
        relevant_docs: List[Dict]
    ) -> str:
        """–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è AI"""
        context_str = ""
        if user_context:
            context_str = f"""
–ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
- –¢–∏–ø –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: {user_context.get('business_type', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}
- –î–æ—Ö–æ–¥—ã: {user_context.get('revenue', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}
- –†–µ–∂–∏–º –Ω–∞–ª–æ–≥–æ–æ–±–ª–æ–∂–µ–Ω–∏—è: {user_context.get('tax_regime', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}
"""
        
        docs_str = "\n".join([
            f"–ò—Å—Ç–æ—á–Ω–∏–∫: {doc['source']}\n{doc['text'][:500]}"
            for doc in relevant_docs
        ])
        
        return f"""
–¢—ã - AI-–±—É—Ö–≥–∞–ª—Ç–µ—Ä, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—â–∏–π—Å—è –Ω–∞ –Ω–∞–ª–æ–≥–æ–æ–±–ª–æ–∂–µ–Ω–∏–∏ –≤ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–µ
–∏ —Ä–∞–±–æ—Ç–µ —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–º Kaspi.kz.

{context_str}

–†–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:
{docs_str}

–í–æ–ø—Ä–æ—Å: {question}

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
1. –û—Ç–≤–µ—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å, —Å—Å—ã–ª–∞—è—Å—å –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ –ù–∞–ª–æ–≥–æ–≤–æ–≥–æ –∫–æ–¥–µ–∫—Å–∞ –†–ö
2. –ï—Å–ª–∏ –≤–æ–ø—Ä–æ—Å –∫–∞—Å–∞–µ—Ç—Å—è Kaspi, —É—á—Ç–∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫—É —Ä–∞–±–æ—Ç—ã —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–º
3. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
4. –£–∫–∞–∂–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
5. –ü–∏—à–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ

–û—Ç–≤–µ—Ç:
"""
    
    async def _generate_response(self, prompt: str) -> Dict[str, str]:
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ —á–µ—Ä–µ–∑ OpenAI"""
        response = self.client.chat.completions.create(
            model="gpt-4-turbo-preview",
            messages=[
                {
                    "role": "system",
                    "content": "–¢—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –±—É—Ö–≥–∞–ª—Ç–µ—Ä –≤ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–µ, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—â–∏–π—Å—è –Ω–∞ –Ω–∞–ª–æ–≥–æ–æ–±–ª–æ–∂–µ–Ω–∏–∏ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –∫–æ–º–º–µ—Ä—Ü–∏–∏ –∏ —Ä–∞–±–æ—Ç–µ —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞–º–∏."
                },
                {
                    "role": "user",
                    "content": prompt
                }
            ],
            temperature=0.3,  # –ù–∏–∑–∫–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏
            max_tokens=1500
        )
        
        return {
            "content": response.choices[0].message.content,
            "model": response.model,
            "usage": response.usage.dict()
        }
    
    def _calculate_confidence(self, relevant_docs: List[Dict]) -> float:
        """–†–∞—Å—á–µ—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤ –æ—Ç–≤–µ—Ç–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤"""
        if not relevant_docs:
            return 0.3
        
        avg_relevance = sum(doc.get("relevance", 0) for doc in relevant_docs) / len(relevant_docs)
        return min(avg_relevance, 1.0)
    
    async def _get_tax_rules(self, tax_regime: str, business_type: str) -> Dict:
        """–ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –Ω–∞–ª–æ–≥–æ–æ–±–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —Ä–µ–∂–∏–º–∞"""
        # –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
        # ...
        pass
    
    def _perform_calculation(
        self, 
        revenue: float, 
        expenses: float,
        tax_regime: str,
        tax_rules: Dict
    ) -> Dict[str, float]:
        """–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–∞—Å—á–µ—Ç–∞ –Ω–∞–ª–æ–≥–æ–≤"""
        # –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞
        # ...
        pass
    
    async def _explain_calculation(self, calculation: Dict, tax_rules: Dict) -> str:
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—è—Å–Ω–µ–Ω–∏–π –∫ —Ä–∞—Å—á–µ—Ç—É —á–µ—Ä–µ–∑ AI"""
        # ...
        pass
```

---

### AI-—é—Ä–∏—Å—Ç

```python
# unified-backend/services/ai_lawyer.py

"""
@file: ai_lawyer.py
@description: AI-—é—Ä–∏—Å—Ç –¥–ª—è —Ä–µ—à–µ–Ω–∏—è —Å–ø–æ—Ä–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π –∏ –∑–∞—â–∏—Ç—ã –ø—Ä–∞–≤ –ø—Ä–æ–¥–∞–≤—Ü–æ–≤
@dependencies: openai, langchain, supabase
@created: 2025-12-09
"""

import asyncio
import logging
from typing import Dict, List, Optional, Any
from datetime import datetime

import openai
from langchain.embeddings import OpenAIEmbeddings
from supabase import create_client

from config import settings
from core.logger import get_logger

logger = get_logger(__name__)


class AILawyer:
    """AI-—é—Ä–∏—Å—Ç –¥–ª—è –∑–∞—â–∏—Ç—ã –ø—Ä–∞–≤ –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ –Ω–∞ Kaspi"""
    
    def __init__(self):
        self.client = openai.OpenAI(api_key=settings.OPENAI_API_KEY)
        self.embeddings = OpenAIEmbeddings(openai_api_key=settings.OPENAI_API_KEY)
        self.supabase = create_client(settings.SUPABASE_URL, settings.SUPABASE_KEY)
        
    async def resolve_dispute(
        self,
        dispute_type: str,
        situation: Dict[str, Any],
        user_context: Optional[Dict[str, Any]] = None
    ) -> Dict[str, Any]:
        """
        –†–µ—à–µ–Ω–∏–µ —Å–ø–æ—Ä–Ω–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏ —Å –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–º –∏–ª–∏ Kaspi
        
        Args:
            dispute_type: –¢–∏–ø —Å–ø–æ—Ä–∞ (return, exchange, complaint, kaspi_violation)
            situation: –û–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Ç—É–∞—Ü–∏–∏
            user_context: –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            
        Returns:
            dict: –ê–Ω–∞–ª–∏–∑, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ –ø—Ä–∞–≤–æ–≤–∞—è –±–∞–∑–∞
        """
        try:
            # –ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –∑–∞–∫–æ–Ω–æ–≤ –∏ –ø—Ä–∞–≤–∏–ª
            relevant_laws = await self._search_legal_base(dispute_type, situation)
            
            # –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞
            prompt = self._build_legal_prompt(dispute_type, situation, relevant_laws, user_context)
            
            # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞
            response = await self._generate_legal_response(prompt)
            
            # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
            recommendations = self._extract_recommendations(response["content"])
            
            return {
                "analysis": response["content"],
                "recommendations": recommendations,
                "legal_basis": relevant_laws[:3],
                "dispute_type": dispute_type,
                "confidence": self._calculate_confidence(relevant_laws),
                "timestamp": datetime.now().isoformat()
            }
            
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –≤ resolve_dispute: {e}", exc_info=True)
            raise
    
    async def analyze_contract(
        self,
        contract_text: str,
        contract_type: str = "kaspi_agreement"
    ) -> Dict[str, Any]:
        """
        –ê–Ω–∞–ª–∏–∑ –¥–æ–≥–æ–≤–æ—Ä–∞ –∏–ª–∏ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è
        
        Args:
            contract_text: –¢–µ–∫—Å—Ç –¥–æ–≥–æ–≤–æ—Ä–∞
            contract_type: –¢–∏–ø –¥–æ–≥–æ–≤–æ—Ä–∞
            
        Returns:
            dict: –ê–Ω–∞–ª–∏–∑ –¥–æ–≥–æ–≤–æ—Ä–∞ —Å –≤—ã—è–≤–ª–µ–Ω–∏–µ–º —Ä–∏—Å–∫–æ–≤
        """
        try:
            # –ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –∑–∞–∫–æ–Ω–æ–≤
            relevant_laws = await self._search_legal_base("contract_analysis", {"type": contract_type})
            
            # –ê–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ AI
            analysis = await self._analyze_contract_ai(contract_text, relevant_laws)
            
            return {
                "analysis": analysis,
                "risks": self._extract_risks(analysis),
                "recommendations": self._extract_contract_recommendations(analysis),
                "legal_basis": relevant_laws
            }
            
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –≤ analyze_contract: {e}", exc_info=True)
            raise
    
    async def _search_legal_base(
        self, 
        dispute_type: str, 
        situation: Dict
    ) -> List[Dict]:
        """–ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –∑–∞–∫–æ–Ω–æ–≤ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π"""
        try:
            # –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞
            query = f"{dispute_type} {situation.get('description', '')}"
            
            # –°–æ–∑–¥–∞–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∞
            query_embedding = await self.embeddings.aembed_query(query)
            
            # –ü–æ–∏—Å–∫ –≤ Supabase Vector
            results = self.supabase.rpc(
                "match_documents",
                {
                    "query_embedding": query_embedding,
                    "match_threshold": 0.7,
                    "match_count": 5,
                    "filter": {"category": "lawyer", "type": dispute_type}
                }
            ).execute()
            
            return [
                {
                    "text": doc["text"],
                    "source": doc["metadata"].get("source", "unknown"),
                    "article": doc["metadata"].get("article", ""),
                    "relevance": doc.get("similarity", 0)
                }
                for doc in results.data
            ]
            
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ –≤ —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–π –±–∞–∑–µ: {e}")
            return []
    
    def _build_legal_prompt(
        self,
        dispute_type: str,
        situation: Dict,
        relevant_laws: List[Dict],
        user_context: Optional[Dict]
    ) -> str:
        """–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞"""
        context_str = ""
        if user_context:
            context_str = f"""
–ö–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–¥–∞–≤—Ü–∞:
- –¢–∏–ø –±–∏–∑–Ω–µ—Å–∞: {user_context.get('business_type', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}
- –°—Ç–∞—Ç—É—Å –Ω–∞ Kaspi: {user_context.get('kaspi_status', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}
"""
        
        laws_str = "\n".join([
            f"–°—Ç–∞—Ç—å—è: {law.get('article', 'N/A')}\n–ò—Å—Ç–æ—á–Ω–∏–∫: {law['source']}\n{law['text'][:500]}"
            for law in relevant_laws
        ])
        
        return f"""
–¢—ã - AI-—é—Ä–∏—Å—Ç, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—â–∏–π—Å—è –Ω–∞ –∑–∞—â–∏—Ç–µ –ø—Ä–∞–≤ –ø—Ä–æ–¥–∞–≤—Ü–æ–≤
–Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–µ Kaspi.kz –≤ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–µ.

–¢–∏–ø —Å–ø–æ—Ä–∞: {dispute_type}
–°–∏—Ç—É–∞—Ü–∏—è: {situation.get('description', '')}

{context_str}

–†–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –∑–∞–∫–æ–Ω—ã –∏ –ø—Ä–∞–≤–∏–ª–∞:
{laws_str}

–ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å:
1. –ê–Ω–∞–ª–∏–∑ —Å–∏—Ç—É–∞—Ü–∏–∏ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –†–ö
2. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∑–∞—â–∏—Ç–µ –ø—Ä–∞–≤ –ø—Ä–æ–¥–∞–≤—Ü–∞
3. –ü–æ—à–∞–≥–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è —Ä–µ—à–µ–Ω–∏—è —Å–ø–æ—Ä–∞
4. –°—Å—ã–ª–∫–∏ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ –∑–∞–∫–æ–Ω–æ–≤ –∏ –ø—Ä–∞–≤–∏–ª–∞ Kaspi
5. –í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–∏—Å–∫–∏ –∏ –∫–∞–∫ –∏—Ö –∏–∑–±–µ–∂–∞—Ç—å

–ü–∏—à–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ, –±—É–¥—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∏ –ø—Ä–∞–∫—Ç–∏—á–Ω—ã–º.

–û—Ç–≤–µ—Ç:
"""
    
    async def _generate_legal_response(self, prompt: str) -> Dict[str, str]:
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ —á–µ—Ä–µ–∑ OpenAI"""
        response = self.client.chat.completions.create(
            model="gpt-4-turbo-preview",
            messages=[
                {
                    "role": "system",
                    "content": "–¢—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —é—Ä–∏—Å—Ç –≤ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–µ, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—â–∏–π—Å—è –Ω–∞ –∑–∞—â–∏—Ç–µ –ø—Ä–∞–≤ –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ –Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞—Ö –∏ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –∫–æ–º–º–µ—Ä—Ü–∏–∏."
                },
                {
                    "role": "user",
                    "content": prompt
                }
            ],
            temperature=0.2,  # –û—á–µ–Ω—å –Ω–∏–∑–∫–∞—è –¥–ª—è —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏
            max_tokens=2000
        )
        
        return {
            "content": response.choices[0].message.content,
            "model": response.model,
            "usage": response.usage.dict()
        }
    
    def _extract_recommendations(self, analysis: str) -> List[str]:
        """–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –∏–∑ –∞–Ω–∞–ª–∏–∑–∞"""
        # –ü—Ä–æ—Å—Ç–æ–π –ø–∞—Ä—Å–∏–Ω–≥ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞
        # ...
        return []
    
    def _calculate_confidence(self, relevant_laws: List[Dict]) -> float:
        """–†–∞—Å—á–µ—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –∑–∞–∫–æ–Ω–æ–≤"""
        if not relevant_laws:
            return 0.3
        
        avg_relevance = sum(law.get("relevance", 0) for law in relevant_laws) / len(relevant_laws)
        return min(avg_relevance, 1.0)
    
    async def _analyze_contract_ai(self, contract_text: str, relevant_laws: List[Dict]) -> str:
        """–ê–Ω–∞–ª–∏–∑ –¥–æ–≥–æ–≤–æ—Ä–∞ —á–µ—Ä–µ–∑ AI"""
        # ...
        pass
    
    def _extract_risks(self, analysis: str) -> List[str]:
        """–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ä–∏—Å–∫–æ–≤ –∏–∑ –∞–Ω–∞–ª–∏–∑–∞"""
        # ...
        return []
    
    def _extract_contract_recommendations(self, analysis: str) -> List[str]:
        """–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ –¥–æ–≥–æ–≤–æ—Ä—É"""
        # ...
        return []
```

---

## üîå API Endpoints

### AI-–±—É—Ö–≥–∞–ª—Ç–µ—Ä

```python
# unified-backend/routes/ai_accountant.py

from fastapi import APIRouter, HTTPException, Depends
from pydantic import BaseModel
from typing import Optional, Dict, Any

from services.ai_accountant import AIAccountant

router = APIRouter(prefix="/api/v1/ai-accountant", tags=["AI Accountant"])

class TaxQuestionRequest(BaseModel):
    question: str
    user_context: Optional[Dict[str, Any]] = None

class TaxCalculationRequest(BaseModel):
    revenue: float
    expenses: float
    tax_regime: str
    business_type: str = "–ò–ü"

@router.post("/ask")
async def ask_tax_question(request: TaxQuestionRequest):
    """–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –ø–æ –Ω–∞–ª–æ–≥–∞–º"""
    accountant = AIAccountant()
    try:
        result = await accountant.answer_tax_question(
            question=request.question,
            user_context=request.user_context
        )
        return result
    except Exception as e:
        raise HTTPException(status_code=500, detail=str(e))

@router.post("/calculate")
async def calculate_tax(request: TaxCalculationRequest):
    """–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –Ω–∞–ª–æ–≥–∏"""
    accountant = AIAccountant()
    try:
        result = await accountant.calculate_tax(
            revenue=request.revenue,
            expenses=request.expenses,
            tax_regime=request.tax_regime,
            business_type=request.business_type
        )
        return result
    except Exception as e:
        raise HTTPException(status_code=500, detail=str(e))
```

### AI-—é—Ä–∏—Å—Ç

```python
# unified-backend/routes/ai_lawyer.py

from fastapi import APIRouter, HTTPException
from pydantic import BaseModel
from typing import Optional, Dict, Any

from services.ai_lawyer import AILawyer

router = APIRouter(prefix="/api/v1/ai-lawyer", tags=["AI Lawyer"])

class DisputeRequest(BaseModel):
    dispute_type: str
    situation: Dict[str, Any]
    user_context: Optional[Dict[str, Any]] = None

class ContractAnalysisRequest(BaseModel):
    contract_text: str
    contract_type: str = "kaspi_agreement"

@router.post("/resolve-dispute")
async def resolve_dispute(request: DisputeRequest):
    """–†–µ—à–∏—Ç—å —Å–ø–æ—Ä–Ω—É—é —Å–∏—Ç—É–∞—Ü–∏—é"""
    lawyer = AILawyer()
    try:
        result = await lawyer.resolve_dispute(
            dispute_type=request.dispute_type,
            situation=request.situation,
            user_context=request.user_context
        )
        return result
    except Exception as e:
        raise HTTPException(status_code=500, detail=str(e))

@router.post("/analyze-contract")
async def analyze_contract(request: ContractAnalysisRequest):
    """–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–æ–≥–æ–≤–æ—Ä"""
    lawyer = AILawyer()
    try:
        result = await lawyer.analyze_contract(
            contract_text=request.contract_text,
            contract_type=request.contract_type
        )
        return result
    except Exception as e:
        raise HTTPException(status_code=500, detail=str(e))
```

---

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–Ω–∞–Ω–∏–π

```sql
-- –ú–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã knowledge_base

CREATE TABLE IF NOT EXISTS knowledge_base (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    text TEXT NOT NULL,
    category TEXT NOT NULL, -- 'accountant' –∏–ª–∏ 'lawyer'
    subcategory TEXT, -- 'tax_code', 'kaspi_rules', etc.
    source TEXT NOT NULL,
    metadata JSONB DEFAULT '{}',
    embedding vector(1536), -- OpenAI embedding —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- –ò–Ω–¥–µ–∫—Å –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
CREATE INDEX IF NOT EXISTS knowledge_base_embedding_idx 
ON knowledge_base 
USING ivfflat (embedding vector_cosine_ops)
WITH (lists = 100);

-- –ò–Ω–¥–µ–∫—Å –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
CREATE INDEX IF NOT EXISTS knowledge_base_category_idx 
ON knowledge_base(category, subcategory);

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ—Ö–æ–∂–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
CREATE OR REPLACE FUNCTION match_documents(
    query_embedding vector(1536),
    match_threshold float,
    match_count int,
    filter jsonb DEFAULT '{}'
)
RETURNS TABLE (
    id uuid,
    text text,
    metadata jsonb,
    similarity float
)
LANGUAGE plpgsql
AS $$
BEGIN
    RETURN QUERY
    SELECT
        knowledge_base.id,
        knowledge_base.text,
        knowledge_base.metadata,
        1 - (knowledge_base.embedding <=> query_embedding) as similarity
    FROM knowledge_base
    WHERE 
        1 - (knowledge_base.embedding <=> query_embedding) > match_threshold
        AND (filter = '{}' OR knowledge_base.metadata @> filter)
    ORDER BY knowledge_base.embedding <=> query_embedding
    LIMIT match_count;
END;
$$;
```

---

## üöÄ –ü–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –±–∞–∑ –∑–Ω–∞–Ω–∏–π (1-2 –Ω–µ–¥–µ–ª–∏)

1. **–ü–∞—Ä—Å–∏–Ω–≥ –ù–∞–ª–æ–≥–æ–≤–æ–≥–æ –∫–æ–¥–µ–∫—Å–∞ –†–ö**
   - –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç `scripts/parse_tax_code.py`
   - –ü–∞—Ä—Å–∏–Ω–≥ —Å —Å–∞–π—Ç–∞ Adilet
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —Å—Ç–∞—Ç—å—è–º
   - –ó–∞–≥—Ä—É–∑–∫–∞ –≤ –≤–µ–∫—Ç–æ—Ä–Ω—É—é –ë–î

2. **–ü–∞—Ä—Å–∏–Ω–≥ –ø—Ä–∞–≤–∏–ª Kaspi**
   - –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç `scripts/parse_kaspi_rules.py`
   - –ü–∞—Ä—Å–∏–Ω–≥ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ Kaspi
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª
   - –ó–∞–≥—Ä—É–∑–∫–∞ –≤ –≤–µ–∫—Ç–æ—Ä–Ω—É—é –ë–î

3. **–°–æ–∑–¥–∞–Ω–∏–µ FAQ**
   - –°–±–æ—Ä —Ç–∏–ø–∏—á–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
   - –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
   - –ó–∞–≥—Ä—É–∑–∫–∞ –≤ –±–∞–∑—É –∑–Ω–∞–Ω–∏–π

4. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase Vector**
   - –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã `knowledge_base`
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω–¥–µ–∫—Å–æ–≤
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∏—Å–∫–∞

### –≠—Ç–∞–ø 2: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ AI-–º–æ–¥—É–ª–µ–π (2-3 –Ω–µ–¥–µ–ª–∏)

1. **–°–æ–∑–¥–∞–Ω–∏–µ `ai_accountant.py`**
   - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenAI
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–∞—Ö

2. **–°–æ–∑–¥–∞–Ω–∏–µ `ai_lawyer.py`**
   - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenAI
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö

3. **–°–æ–∑–¥–∞–Ω–∏–µ `knowledge_base.py`**
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π
   - –§—É–Ω–∫—Ü–∏–∏ –ø–æ–∏—Å–∫–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞

### –≠—Ç–∞–ø 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É (1 –Ω–µ–¥–µ–ª—è)

1. **API endpoints**
   - –°–æ–∑–¥–∞–Ω–∏–µ —Ä–æ—É—Ç–æ–≤ –¥–ª—è –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∞
   - –°–æ–∑–¥–∞–Ω–∏–µ —Ä–æ—É—Ç–æ–≤ –¥–ª—è —é—Ä–∏—Å—Ç–∞
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `main.py`

2. **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**
   - –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ UX

3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API**
   - Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
   - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –≠—Ç–∞–ø 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–ª—É—á—à–µ–Ω–∏–µ (1-2 –Ω–µ–¥–µ–ª–∏)

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏**
   - –°–±–æ—Ä –≤–æ–ø—Ä–æ—Å–æ–≤ –æ—Ç –ø—Ä–æ–¥–∞–≤—Ü–æ–≤
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤
   - –°–±–æ—Ä feedback

2. **–£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤**
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ feedback
   - A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤
   - –£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞**
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - –ê–Ω–∞–ª–∏–∑ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
   - –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤

---

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å –∏ —Ä–µ—Å—É—Ä—Å—ã

### –ü—Ä–∏–º–µ—Ä–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã:

- **OpenAI API**: ~$50-200/–º–µ—Å—è—Ü (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
  - GPT-4 Turbo: $0.01-0.03 –∑–∞ 1K —Ç–æ–∫–µ–Ω–æ–≤
  - Embeddings: $0.0001 –∑–∞ 1K —Ç–æ–∫–µ–Ω–æ–≤
  
- **Supabase**: –£–∂–µ –µ—Å—Ç—å (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ –¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω)
  - –•—Ä–∞–Ω–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–æ–≤: –±–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–æ 500MB
  - –ó–∞–ø—Ä–æ—Å—ã: –±–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–æ 50K/–º–µ—Å—è—Ü

- **–ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö**: –ë–µ—Å–ø–ª–∞—Ç–Ω–æ (—Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã)

- **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞**: 4-6 –Ω–µ–¥–µ–ª—å —Ä–∞–±–æ—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞—Ç—Ä–∞—Ç:

1. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ–ª–µ–µ –¥–µ—à–µ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
3. Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

### –î–ª—è AI-–±—É—Ö–≥–∞–ª—Ç–µ—Ä–∞:

- **–¢–æ—á–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤**: >85% –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞**: <5 —Å–µ–∫—É–Ω–¥
- **–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**: >4.5/5
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: >50% –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –î–ª—è AI-—é—Ä–∏—Å—Ç–∞:

- **–¢–æ—á–Ω–æ—Å—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π**: >80% –ø–æ–ª–µ–∑–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞**: <7 —Å–µ–∫—É–Ω–¥
- **–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**: >4.5/5
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: >40% –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:

1. **–ù–µ —è–≤–ª—è–µ—Ç—Å—è –∑–∞–º–µ–Ω–æ–π –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∞/—é—Ä–∏—Å—Ç–∞**
   - AI –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏, –Ω–æ –Ω–µ –∑–∞–º–µ–Ω—è–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤
   - –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∞–º

2. **–ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏**
   - –ó–∞–∫–æ–Ω—ã –º–æ–≥—É—Ç –∏–∑–º–µ–Ω—è—Ç—å—Å—è
   - –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π

3. **–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å**
   - –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:

1. **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
2. **Rate limiting** –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π
3. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API

---

## üìù –ß–µ–∫–ª–∏—Å—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å OpenAI API –∫–ª—é—á
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Supabase Vector
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π:
- [ ] –ü–∞—Ä—Å–∏–Ω–≥ –ù–∞–ª–æ–≥–æ–≤–æ–≥–æ –∫–æ–¥–µ–∫—Å–∞ –†–ö
- [ ] –ü–∞—Ä—Å–∏–Ω–≥ –ø—Ä–∞–≤–∏–ª Kaspi
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ FAQ
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ –≤ –≤–µ–∫—Ç–æ—Ä–Ω—É—é –ë–î

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:
- [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `ai_accountant.py`
- [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `ai_lawyer.py`
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ API endpoints
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `main.py`

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
- [ ] Unit —Ç–µ—Å—Ç—ã
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏
- [ ] –°–±–æ—Ä feedback

### –î–µ–ø–ª–æ–π:
- [ ] –î–µ–ø–ª–æ–π –Ω–∞ production
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2025-12-09  
**–í–µ—Ä—Å–∏—è**: 1.0  
**–°—Ç–∞—Ç—É—Å**: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ


