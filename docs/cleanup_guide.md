# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ—á–∏—Å—Ç–∫–µ —Å—Ç–∞—Ä—ã—Ö –±—ç–∫–µ–Ω–¥–æ–≤

## üìã –ß—Ç–æ –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ —É–¥–∞–ª–∏—Ç—å

### ‚úÖ –ú–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å —Å—Ä–∞–∑—É (–¥—É–±–ª–∏–∫–∞—Ç—ã/—Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏):

1. **`backend/`** - —Å—Ç–∞—Ä—ã–π –±—ç–∫–µ–Ω–¥ –Ω–∞ FastAPI + Selenium
   - –£—Å—Ç–∞—Ä–µ–≤—à–∞—è –≤–µ—Ä—Å–∏—è
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Selenium –≤–º–µ—Å—Ç–æ Playwright
   - –í—Å—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –µ—Å—Ç—å –≤ unified-backend

2. **`newnew/`** - –¥—É–±–ª–∏–∫–∞—Ç backend/
   - –ò–¥–µ–Ω—Ç–∏—á–µ–Ω backend/
   - –ú–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ —É–¥–∞–ª–∏—Ç—å

3. **`simple_kaspi_backend.py`** - –ø—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–∏–ø—Ç
   - –¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
   - –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

4. **`start-unified-backend.sh`** - —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
   - –ë–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º Django

### ‚ö†Ô∏è –ú–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ –ø–µ—Ä–µ–Ω–æ—Å–∞ —Ñ—É–Ω–∫—Ü–∏–π:

5. **`unified-backend/`** - –æ—Å–Ω–æ–≤–Ω–æ–π FastAPI –±—ç–∫–µ–Ω–¥
   - **–ù–ï –£–î–ê–õ–Ø–¢–¨** –ø–æ–∫–∞ –Ω–µ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏!
   - –°–æ–¥–µ—Ä–∂–∏—Ç –∫—Ä–∏—Ç–∏—á–Ω—É—é –ª–æ–≥–∏–∫—É:
     - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤
     - –ü–∞—Ä—Å–∏–Ω–≥ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
     - –î–µ–º–ø–µ—Ä —Ü–µ–Ω
     - SMS –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
     - –ü—Ä–µ–¥–∑–∞–∫–∞–∑—ã
     - Proxy –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞

## üöÄ –ö–∞–∫ —É–¥–∞–ª–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç

```bash
./cleanup_backends.sh
```

–°–∫—Ä–∏–ø—Ç:
- –°–æ—Ö—Ä–∞–Ω–∏—Ç –≤–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ –∞—Ä—Ö–∏–≤
- –°–ø—Ä–æ—Å–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ —É–¥–∞–ª–∏—Ç —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –≤—ã –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ

```bash
# 1. –°–æ–∑–¥–∞—Ç—å –∞—Ä—Ö–∏–≤ –≤–∞–∂–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
mkdir -p archive_backends
cp -r unified-backend/api_parser.py archive_backends/
cp -r unified-backend/proxy_balancer.py archive_backends/
cp -r unified-backend/error_handlers.py archive_backends/
cp -r unified-backend/demper.py archive_backends/

# 2. –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –±—ç–∫–µ–Ω–¥—ã
rm -rf backend/
rm -rf newnew/
rm -f simple_kaspi_backend.py
rm -f start-unified-backend.sh

# 3. unified-backend —É–¥–∞–ª–∏—Ç—å –ü–û–°–õ–ï –ø–µ—Ä–µ–Ω–æ—Å–∞ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
# rm -rf unified-backend/
```

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º unified-backend

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ Django –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ:

- [x] –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- [x] –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (KaspiStore, Product, Preorder)
- [x] REST API endpoints
- [x] –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è Kaspi (Playwright)
- [ ] **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤** (`sync_store_api`)
- [ ] **–ü–∞—Ä—Å–∏–Ω–≥ –ø—Ä–æ–¥—É–∫—Ç–æ–≤** (`parse_product_by_sku`)
- [ ] **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω** (`sync_product`)
- [ ] **–î–µ–º–ø–µ—Ä —Ü–µ–Ω** (`demper.py`)
- [ ] **SMS –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** (`sms_login_start`, `sms_login_verify`)
- [ ] **–ü—Ä–µ–¥–∑–∞–∫–∞–∑—ã** (`fetch_preorders`, `handle_upload_preorder`)
- [ ] **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂** (`get_sells`)
- [ ] **Proxy –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞** (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- [ ] **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** (`error_handlers.py`)

## üì¶ –ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –∞—Ä—Ö–∏–≤–µ

–ü–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º `unified-backend/`, —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ:

```
archive/
‚îú‚îÄ‚îÄ unified-backend/
‚îÇ   ‚îú‚îÄ‚îÄ api_parser.py          # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ proxy_balancer.py      # Proxy (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
‚îÇ   ‚îú‚îÄ‚îÄ error_handlers.py      # –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ demper.py              # –î–µ–º–ø–µ—Ä —Ü–µ–Ω
‚îÇ   ‚îú‚îÄ‚îÄ demper_instance.py     # –î–µ–º–ø–µ—Ä (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)
‚îÇ   ‚îú‚îÄ‚îÄ routes/                # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ migrations/            # SQL –º–∏–≥—Ä–∞—Ü–∏–∏ (–¥–ª—è —Å–ø—Ä–∞–≤–∫–∏)
‚îÇ   ‚îî‚îÄ‚îÄ utils.py               # –£—Ç–∏–ª–∏—Ç—ã
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Django –±—ç–∫–µ–Ω–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç
cd django-backend
python manage.py check
python manage.py runserver

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å health check
curl http://localhost:8010/health/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ë–î
curl http://localhost:8010/health/db/
```

## ‚ö†Ô∏è –í–ê–ñ–ù–û

1. **–ù–ï —É–¥–∞–ª—è–π—Ç–µ unified-backend/** –ø–æ–∫–∞ –Ω–µ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏
2. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã** –≤ –∞—Ä—Ö–∏–≤ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ Django –±—ç–∫–µ–Ω–¥** –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º —Å—Ç–∞—Ä—ã—Ö
4. **–°–¥–µ–ª–∞–π—Ç–µ backup** –µ—Å–ª–∏ –µ—Å—Ç—å –≤–∞–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

## üìù –ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–Ω–æ—Å–∞ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏ —É–¥–∞–ª–µ–Ω–∏—è unified-backend:

1. –û–±–Ω–æ–≤–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
2. –û–±–Ω–æ–≤–∏—Ç–µ README.md
3. –£–¥–∞–ª–∏—Ç–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ç–∞—Ä—ã–µ –±—ç–∫–µ–Ω–¥—ã
4. –û–±–Ω–æ–≤–∏—Ç–µ CI/CD –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)

