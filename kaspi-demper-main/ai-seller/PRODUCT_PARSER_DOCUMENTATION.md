# PRODUCT_PARSER_DOCUMENTATION.md
"""
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–∞—Ä—Å–µ—Ä–∞ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è AI-–ø—Ä–æ–¥–∞–∂–Ω–∏–∫–∞
"""

# üì¶ –ü–∞—Ä—Å–µ—Ä —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è AI-–ø—Ä–æ–¥–∞–∂–Ω–∏–∫–∞

## üéØ –û–±–∑–æ—Ä

–ü–∞—Ä—Å–µ—Ä —Ç–æ–≤–∞—Ä–æ–≤ - —ç—Ç–æ –º–æ–¥—É–ª—å, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ —Ç–æ–≤–∞—Ä–∞—Ö –ø—Ä–æ–¥–∞–≤—Ü–∞ –∏–∑ Kaspi.kz –∏ —Å–æ–∑–¥–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é –±–∞–∑—É –∑–Ω–∞–Ω–∏–π –¥–ª—è AI-–ø—Ä–æ–¥–∞–∂–Ω–∏–∫–∞. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç AI –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ —Ç–æ–≤–∞—Ä–∞—Ö.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ‚úÖ **–ß—Ç–æ –ø–∞—Ä—Å–∏—Ç:**
- **–ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ç–æ–≤–∞—Ä–∞** - –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞** - –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- **–¶–µ–Ω–∞** - –¥–ª—è —Ü–µ–Ω–æ–≤—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
- **–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏** - –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è
- **–°—Å—ã–ª–∫–∞ –Ω–∞ –æ—Ç–∑—ã–≤—ã** - –¥–ª—è —Å–æ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞
- **–°—Å—ã–ª–∫–∞ –Ω–∞ —Ç–æ–≤–∞—Ä** - —Ç–æ–ª—å–∫–æ –∏–∑ –∫–∞–±–∏–Ω–µ—Ç–∞ –ø—Ä–æ–¥–∞–≤—Ü–∞ (–∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–∞—è —Ñ–∏—á–∞)
- **–†–µ–π—Ç–∏–Ω–≥ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤** - –¥–ª—è –¥–æ–≤–µ—Ä–∏—è
- **–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞** - –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** - –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### üîß **–ß—Ç–æ —Å–æ–∑–¥–∞–µ—Ç:**
- **XML —Ñ–∞–π–ª—ã** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **JSON —Ñ–∞–π–ª—ã** - –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- **–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π** - –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å AI-–ø—Ä–æ–¥–∞–∂–Ω–∏–∫–æ–º
- **API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã** - –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –ø–æ–∏—Å–∫–∞

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
ai-seller/
‚îú‚îÄ‚îÄ product_parser.py              # –û—Å–Ω–æ–≤–Ω–æ–π –ø–∞—Ä—Å–µ—Ä —Ç–æ–≤–∞—Ä–æ–≤
‚îú‚îÄ‚îÄ product_api.py                 # API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä—Å–µ—Ä–æ–º
‚îú‚îÄ‚îÄ knowledge_base_integration.py  # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π
‚îú‚îÄ‚îÄ main_with_product_parser.py    # –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π AI-–ø—Ä–æ–¥–∞–∂–Ω–∏–∫
‚îú‚îÄ‚îÄ test_product_parser.py         # –¢–µ—Å—Ç—ã –ø–∞—Ä—Å–µ—Ä–∞
‚îú‚îÄ‚îÄ knowledge_base/               # –ü–∞–ø–∫–∞ —Å —Ñ–∞–π–ª–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ products_knowledge_base_*.xml
‚îÇ   ‚îú‚îÄ‚îÄ products_knowledge_base_*.json
‚îÇ   ‚îî‚îÄ‚îÄ current_products.json
‚îî‚îÄ‚îÄ knowledge_base.json           # –û—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π
```

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```bash
pip install aiohttp asyncio xml.etree.ElementTree flask flask-cors requests
```

### 2. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```bash
# –í .env —Ñ–∞–π–ª–µ
KASPI_SHOP_ID=your_shop_id
OPENAI_API_KEY=your_openai_key
WAHA_API_ENDPOINT=http://localhost:3000
WAHA_SESSION_ID=your_session_id
```

### 3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—É—Ç–µ–π:**
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—É—Ç–∏ –∫ –º–æ–¥—É–ª—è–º `api_parser.py` –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã –≤ `product_parser.py`.

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### **–ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```python
from product_parser import parse_products_for_ai_seller

# –ü–∞—Ä—Å–∏–Ω–≥ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –º–∞–≥–∞–∑–∏–Ω–∞
result = await parse_products_for_ai_seller("your_shop_id")

if result["success"]:
    print(f"–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤: {result['total_products']}")
    print(f"XML —Ñ–∞–π–ª: {result['xml_file']}")
    print(f"JSON —Ñ–∞–π–ª: {result['json_file']}")
```

### **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API:**

```python
import requests

# –ó–∞–ø—É—Å–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞
response = requests.post("http://localhost:8081/api/products/parse/your_shop_id")

# –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤
search_data = {"query": "iPhone", "category": "–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞"}
response = requests.post("http://localhost:8081/api/products/search", json=search_data)

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
order_data = {"product_sku": "SKU123"}
response = requests.post("http://localhost:8081/api/products/recommendations", json={"order": order_data})
```

## üìä API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### **–ü–∞—Ä—Å–∏–Ω–≥ —Ç–æ–≤–∞—Ä–æ–≤:**
- `POST /api/products/parse/<shop_id>` - –ó–∞–ø—É—Å–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞
- `GET /api/products/status/<shop_id>` - –°—Ç–∞—Ç—É—Å –ø–∞—Ä—Å–∏–Ω–≥–∞
- `GET /api/products/files/<shop_id>` - –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤

### **–ü–æ–∏—Å–∫ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- `POST /api/products/search` - –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤
- `POST /api/products/recommendations` - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤
- `GET /api/products/categories` - –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

### **–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π:**
- `GET /api/products/knowledge-base` - –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
- `POST /api/products/knowledge-base` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
- `GET /api/products/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤

### **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
- `GET /api/products/health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è API

## üß† –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AI-–ø—Ä–æ–¥–∞–∂–Ω–∏–∫–æ–º

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:**
–ü–∞—Ä—Å–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –±–∞–∑—É –∑–Ω–∞–Ω–∏–π AI-–ø—Ä–æ–¥–∞–∂–Ω–∏–∫–∞ –∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞.

### **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π:**
AI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ —Ç–æ–≤–∞—Ä–∞—Ö –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π:

```python
# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ AI-–ø—Ä–æ–¥–∞–∂–Ω–∏–∫–µ
product_context = generate_product_context_for_ai("SKU123")
ai_response = generate_ai_response_with_products(stage_id, customer, product_context)
```

### **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤:**
AI –º–æ–∂–µ—Ç –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å —Å–æ–ø—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–æ–≤–∞—Ä—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–∫—É–ø–æ–∫:

```python
recommendations = get_product_recommendations_for_customer(customer_order)
```

## üìà –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### **1. –ü–∞—Ä—Å–∏–Ω–≥ —Ç–æ–≤–∞—Ä–æ–≤ –º–∞–≥–∞–∑–∏–Ω–∞:**
```python
async def parse_shop_products():
    parser = ProductParser("shop_123")
    await parser.initialize()
    result = await parser.run_full_parsing()
    
    print(f"–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: {result['total_products']} —Ç–æ–≤–∞—Ä–æ–≤")
    print(f"–°–æ–∑–¥–∞–Ω–æ —Ñ–∞–π–ª–æ–≤: XML –∏ JSON")
    print(f"–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –æ–±–Ω–æ–≤–ª–µ–Ω–∞: {result['knowledge_base_updated']}")
```

### **2. –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞:**
```python
def find_products_for_customer(query):
    results = search_products_in_knowledge_base(query, "–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞")
    
    for product in results:
        print(f"–¢–æ–≤–∞—Ä: {product['name']}")
        print(f"–¶–µ–Ω–∞: {product['price']} —Ç–µ–Ω–≥–µ")
        print(f"–†–µ–π—Ç–∏–Ω–≥: {product['rating']}/5")
        print(f"–°—Å—ã–ª–∫–∞: {product['merchant_url']}")
```

### **3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è AI:**
```python
def create_ai_context(product_sku):
    context = generate_product_context_for_ai(product_sku)
    
    # AI –ø–æ–ª—É—á–∏—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–≤–∞—Ä–µ:
    # - –ù–∞–∑–≤–∞–Ω–∏–µ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ
    # - –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
    # - –¶–µ–Ω–∞ –∏ —Ä–µ–π—Ç–∏–Ω–≥
    # - –°–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ–¥–∞–∂
    # - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    
    return context
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### **–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–∞—è —Ñ–∏—á–∞:**
- –°—Å—ã–ª–∫–∏ –Ω–∞ —Ç–æ–≤–∞—Ä—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑ –∫–∞–±–∏–Ω–µ—Ç–∞ –ø—Ä–æ–¥–∞–≤—Ü–∞
- –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç—ã –Ω–µ –≤–∏–¥—è—Ç –ø—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ç–æ–≤–∞—Ä—ã
- –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞–º–∏

### **Rate Limiting:**
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Kaspi API
- –ó–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ 429 (Too Many Requests)

### **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ SKU
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ü–µ–Ω –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
- –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### **–ú–µ—Ç—Ä–∏–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫
- –†–∞–∑–º–µ—Ä —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π:**
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- –°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ –∏ —Ä–µ–π—Ç–∏–Ω–≥
- –î–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–Ω

### **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –û—à–∏–±–∫–∏ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API

## üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### **–¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏:**
1. **–û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (401)** - –°–µ—Å—Å–∏—è –∏—Å—Ç–µ–∫–ª–∞
2. **Rate Limit (429)** - –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤
3. **–¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω** - SKU –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
4. **–û—à–∏–±–∫–∞ —Å–µ—Ç–∏** - –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º

### **Fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã:**
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- Graceful degradation –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

### **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á:**
- –ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–∞—Ä—Å–µ—Ä–∞

### **Webhook –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–∞—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### **–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:**
```bash
python test_product_parser.py
```

### **–¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- –ü–∞—Ä—Å–∏–Ω–≥ —Ç–æ–≤–∞—Ä–æ–≤
- –°–æ–∑–¥–∞–Ω–∏–µ XML/JSON —Ñ–∞–π–ª–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π
- API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- –ü–æ–∏—Å–∫ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

## üìã Troubleshooting

### **–ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è:**

1. **"–°–µ—Å—Å–∏—è –∏—Å—Ç–µ–∫–ª–∞"**
   - –†–µ—à–µ–Ω–∏–µ: –û–±–Ω–æ–≤–∏—Ç–µ cookies –≤ SessionManager
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

2. **"–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"**
   - –†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å shop_id
   - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –º–∞–≥–∞–∑–∏–Ω–µ

3. **"–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤"**
   - –†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞–ø–∫–µ
   - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞

4. **"API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"**
   - –†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å Kaspi API
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ–∫—Å–∏ –ø—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### **–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**
1. **–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ** - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤
2. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ü–µ–Ω** - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ü–µ–Ω –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∞–∫—Ü–∏–∏** - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–º–æ-–∫–æ–¥–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM** - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞–º–∏
5. **–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å** - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞–∑–∞—Ö—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–æ–≤

### **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–∞–≥–∞–∑–∏–Ω–æ–≤
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API

**–ü–∞—Ä—Å–µ—Ä —Ç–æ–≤–∞—Ä–æ–≤ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–¥–∞–∂!** üéâ
